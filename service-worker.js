const CURRENT_CACHES={font:"google-font-cache-v3"};async function handleRequest(e){if("only-if-cached"===e.request.cache&&"same-origin"!==e.request.mode||0!==e.request.url.indexOf("https://fonts.googleapis.com/css"))return await fetch(e.request);const t=new Request(e.request.url,{method:e.request.method,body:e.request.body,mode:"cors",credentials:"omit",cache:e.request.cache,redirect:e.request.redirect,referrer:e.request.referrer,integrity:e.request.integrity}),r=await fetch(t);if(r.status<400){const t=await caches.open(CURRENT_CACHES.font),s=await t.match(e.request);if(s)return s;const n=(await r.text()).replace(/}/g,"  font-display: swap; \n}"),a=new Response(n,{headers:r.headers});return t.put(e.request,a.clone()),a}return r}self.addEventListener("fetch",e=>{e.respondWith(handleRequest(e))});